<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
#from vapour.namespaces import EARL
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="generator" content="$testAgent[1] $testAgent[2] (${testAgent[3]})" />
    <meta name="description" content="An automatically-generated report of compliance with respect to the 'Best Practice Recipes for Publishing RDF vocabularies'" />
    <meta name="keywords" content="rdf, best practice, recipes, semantic web" />
    <link type="text/css" rel="stylesheet" href="report-style.css" media="screen,projection,print" />
    <link rel="alternate" type="application/rss+xml" title="RDF version of this report" href="FIXME" />
    <title>Vapour Report</title>
  </head>
  <body>
    <h1>Vapour Report</h1>
    <div class="all">
    
    <div class="summary">
      <h2>Summary</h2>
      <table class="summaryTable">
        <thead>
          <tr>
            <td>Test requirement</td>
            <td>Passed tests</td>
          </tr>
        </thead>
        <tbody>
          #for $testRequirement in $testRequirements:
          <tr>
            <td>
              <!--a href="#$testRequirement[0]"-->
              $testRequirement[1]
              <!--/a-->
             </td>
             #set $totalTests = len($testResults[$testRequirement[0]])
             #set $failedTests = len([x for x in $testResults[$testRequirement[0]] if x[3] == EARL["fail"]])
             #if $failedTests == 0:
               #set $cssClass = "allTestsOk"
             #else:
               #set $cssClass = "someTestsFail"
             #endif
            <td class="$cssClass">
            #echo ($totalTests - $failedTests)#/$totalTests
            </td>            
          </tr>
          #end for
        </tbody>
      </table>
    </div> <!-- /summary -->

     #for $testRequirement in $testRequirements:
    <div>
      <div class="httpDialog">
        <h2>
          <!-- a target="$testRequirement[0]"/ -->
          $testRequirement[1]
         </h2>
      <div class="clientIcon">
		<img src="resources/images/computer.png" alt="A computer on the client-side"/>
		<p>Client</p>
      </div> <!-- /clientIcon -->
      <div class="dialogArea">
	#for $trace in $httpTraces[$testRequirement[0]]:
 	   <!-- $trace[1] -->
	  <div class="request">
	  	 <div class="requestInner">
	  	   <span class="httpHeader">GET $trace[2]</span>
	  	 </div>
	  </div> <!-- /request -->
	  <div class="response">
	    <div class="responseInner">
	      #if $trace[3] == "200":
            <div class="fileIcon">
		    <a href="$trace[2]">
		      #if $trace[4] == "application/rdf+xml":
			    <img src="resources/images/rdf-file.png" alt="RDF icon" />
			  #else if $trace[4] == "text/html":
			    <img src="resources/images/html-file.png" alt="HTML icon" />
			  #else
			    <img src="resources/images/unknown-file.png" alt="Unknown file type icon" />
			 #end if
			</a>
			</div> <!-- /fileIcon -->
	      #end if
	      
	      #if $trace[7] == EARL["pass"]:
	        #set $additionalCssClass = "goodHttpHeader"
	      #else if $trace[7] == EARL["fail"]:
	        #set $additionalCssClass = "badHttpHeader"
	      #else:
	        #set $additionalCssClass = ""
	      #end if
	      <span class="httpHeader $additionalCssClass">$trace[3]</span>
	      
	      #if $trace[3] == "200":
	        #if $trace[9] == EARL["pass"]:
	          #set $additionalCssClass = "goodHttpHeader"
	        #else if $trace[9] == EARL["fail"]:
	          #set $additionalCssClass = "badHttpHeader"
	        #else:
	          #set $additionalCssClass = ""
	        #end if	        
	      <span class="httpHeader $additionalCssClass">Content-type: $trace[4]</span>
	      #end if
	      
	      #if $trace[3] == "303":
	      <span class="httpHeader">Location: $trace[5]</span>
	      #end if
	    </div>
	  </div> <!-- /response -->
	#end for
       </div> <!-- /dialogArea -->
      <div class="serverIcon">
		<img src="resources/images/apacheconf.png" alt="A web server" />
		<p>Web server</p>
      </div>
      <div class="dummyR"/>
      </div> <!-- /httpDialog -->

    <h3>Test results</h3>
    <ul>
	#for $test in $testResults[$testRequirement[0]]:
      #if $test[3] == EARL["pass"]:
        #set $testResultCssClass = "correctValue"
      #else
        #set $testResultCssClass = "badValue"
      #end if
	<li>
	  $test[6] ($test[2]):
	  <span class="$testResultCssClass">$test[4]</span>
	</li>
	#end for
    </ul>
    
    #if len($finalUris[$testRequirement[0]]) > 0:
    <h3>Further validation</h3>
    <ul>
    #from urllib import quote
    #for $finalUri in $finalUris[$testRequirement[0]]:
    <li>
      #if $finalUri[1] == 'text/html':
      <a href="http://validator.w3.org/check?uri=#echo quote($finalUri[0], '') #">
        Check the response with the W3C HTTP validator
      </a>
      #else if $finalUri[1] == 'application/rdf+xml':
      <a href="http://www.w3.org/RDF/Validator/ARPServlet?URI=#echo quote($finalUri[0], '') #">
        Check the response with the W3C RDF validator
      </a>
      #end if
    </li>
    #end for
    </ul>
    #end if


    </div>
    #end for

  </div> <!-- /all -->
    
    <div class="footer">
      <p>Report generated by <a href="$testAgent[3]/">$testAgent[1]</a>,
      version $testAgent[2] on ${reportDate}. Please read the
      <a href="http://www.w3.org/TR/swbp-vocab-pub/">Best Practice Recipes</a>
      document. You can also <a href="FIXME">get an RDF version</a> of this
      report.</p>
    </div>
    
  </body>

</html>